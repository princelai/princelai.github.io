<!DOCTYPE html>
<html lang="zh">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>  充值卡折现价值分析
 | Solarck</title>

    <meta name="author" content="Kevin Chen"/>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css"/>
    <link rel="stylesheet" href="https://www.solarck.com/theme/css/jquery.mglass.css"/>
    <link rel="stylesheet" href="https://www.solarck.com/theme/css/pygment-solarized-dark.css"/>
    <link rel="stylesheet" href="https://www.solarck.com/theme/css/style.css"/>

    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Istok+Web' rel='stylesheet' type='text/css'/>
    <link href='https://fonts.googleapis.com/css?family=Droid+Sans+Mono' rel='stylesheet' type='text/css'/>
      <link href='https://fonts.googleapis.com/css?family=Expletus+Sans' rel='stylesheet' type='text/css'>


    <link rel="icon" href="https://www.solarck.com/favicon.ico" type="image/x-icon">
    <link rel="shortcut icon" href="https://www.solarck.com/favicon.ico" type="image/x-icon">

    <!-- Feeds -->
      <link href="https://www.solarck.com/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Solarck - All posts - Atom Feed"/>


  </head>

  <body>

    <div class="container">

      <div class="page-header">
          <a href="https://www.solarck.com" class="avatar-container pull-left">
            <div class="avatar ">
              <div class="side"><img src="https://www.solarck.com/static/avatar.jpg" class="img-responsive"/></div>
            </div>
          </a>
        <h1><a href="https://www.solarck.com">Solarck</a> <small>金融民工与程序猿的结合体</small></h1>
      </div>

      <nav class="navbar navbar-default">

        <!-- Hamburger menu for mobile -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#plumage-navbar-collapse-1" aria-expanded="false">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="https://www.solarck.com" title="金融民工与程序猿的结合体">Solarck</a>
        </div>

        <!-- Menus and search forms -->
        <div class="collapse navbar-collapse" id="plumage-navbar-collapse-1">

          <ul class="nav navbar-nav">
<li >
                  <a href="https://www.solarck.com/category/it-bi-ji.html">IT 笔记</a>
                </li>
<li >
                  <a href="https://www.solarck.com/category/itbi-ji.html">IT笔记</a>
                </li>
<li  class="active" >
                  <a href="https://www.solarck.com/category/jin-rong-bi-ji.html">金融笔记 <span class="sr-only">(current)</span></a>
                </li>
<li >
                  <a href="https://www.solarck.com/pages/aboutme.html">关于我</a>
                </li>
<li >
                  <a href="https://www.solarck.com/pages/resume.html">简历</a>
                </li>

          </ul>


            <form class="navbar-form navbar-right" role="search" action="https://www.solarck.com/search.html" onsubmit="return validateForm(this.elements['q'].value);">
              <div class="form-group">
                <div class="input-group">
                  <input type="text" name="q" id="tipue_search_input" class="form-control search-query" placeholder="Search" required />
                  <span class="input-group-btn">
                    <button class="btn btn-default" type="submit"><i class="fa
                        fa-search fa-fw"></i></button>
                  </span>
                </div>
              </div>
            </form>

        </div>

      </nav>

    </div>


    <div class="container main">


      <div class="row">
        <div class=" col-md-9  ">
  <h1>
    <a href="https://www.solarck.com/gift-card-discount-value.html" rel="bookmark" title="Permalink to 充值卡折现价值分析">充值卡折现价值分析</a>
  </h1>
        </div>
      </div>

      <div class="row">


        <div class=" col-md-9 " id="content" role="main">
  

  <div>
    <p>前几天，媳妇把收到的一条短信转给我，问我值不值，我的第一反应当然是不值，这种预存方式都是欺负不懂时间价值的人玩的把戏。为了说服她，特地手算折现，但是发现，嗯？好像还是挺值的啊。于是就有了这篇文章，把计算的完整思路和代码贴出来。</p>
<p><img alt="message" src="http://kevinstuchuang.qiniudn.com/blog-pic/gift-card-message.jpg"/></p>
<p><em>注：计算全部使用年华利率按月折现</em></p>
<p>求真正价值的思路很简单，</p>
<blockquote>
<p>真实价值 = 充值卡的标称价值向后折现再折回<span class="math">\(T_0\)</span> - 付出的价格按类似年金的方式收息后把总利息折回<span class="math">\(T_0\)</span>时刻</p>
</blockquote>
<p>代码如下：</p>
<div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">calculate_value</span><span class="p">(</span><span class="n">month_after_use</span><span class="p">,</span> <span class="n">year_yield</span><span class="p">,</span> <span class="n">price</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">printlog</span><span class="o">=</span><span class="bp">True</span><span class="p">):</span>
    <span class="n">cash_flow</span> <span class="o">=</span> <span class="n">value</span> <span class="o">/</span> <span class="mi">12</span>

    <span class="k">def</span> <span class="nf">discount</span><span class="p">():</span>
        <span class="n">fv</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="n">cash_flow</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">year_yield</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">y</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">12</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
        <span class="k">return</span> <span class="n">fv</span> <span class="o">/</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">year_yield</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="n">month_after_use</span> <span class="o">/</span> <span class="mi">12</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">interest</span><span class="p">():</span>
        <span class="n">balance</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">price</span> <span class="o">-</span> <span class="n">price</span> <span class="o">/</span> <span class="n">month_after_use</span> <span class="o">*</span> <span class="n">n</span>
            <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span>
                           <span class="nb">int</span><span class="p">(</span><span class="n">month_after_use</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
        <span class="p">]</span>
        <span class="k">return</span> <span class="nb">sum</span><span class="p">(</span>
            <span class="n">b</span> <span class="o">*</span> <span class="p">((</span><span class="mi">1</span> <span class="o">+</span> <span class="n">year_yield</span><span class="p">)</span><span class="o">**</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">month_after_use</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="k">for</span> <span class="n">b</span> <span class="ow">in</span> <span class="n">balance</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">real_value</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">month_after_use</span> <span class="o">&gt;=</span> <span class="mi">12</span><span class="p">:</span>
            <span class="n">total_i</span> <span class="o">=</span> <span class="n">interest</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s1">'Month afer use must great than 12.'</span><span class="p">)</span>
            <span class="nb">exit</span>
        <span class="n">pv</span> <span class="o">=</span> <span class="n">discount</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">pv</span><span class="p">,</span> <span class="n">total_i</span>

    <span class="n">pv</span><span class="p">,</span> <span class="n">total_i</span> <span class="o">=</span> <span class="n">real_value</span><span class="p">()</span>
    <span class="n">real</span> <span class="o">=</span> <span class="n">pv</span> <span class="o">-</span> <span class="n">total_i</span>
    <span class="n">profit</span> <span class="o">=</span> <span class="n">real</span> <span class="o">-</span> <span class="n">price</span>
    <span class="k">if</span> <span class="n">printlog</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">'real value is {real:.2f}.({pv:.2f} - {total_i:.2f})'</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="n">f</span><span class="s1">'You earn {profit:.1f} YUAN.'</span> <span class="k">if</span> <span class="n">profit</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="n">f</span><span class="s1">'You loss {-profit:.1f} YUAN.'</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">profit</span>
</pre></div>
<p>假设我办理 12000 套餐，24 个月用完，折现利率（市场利率）年化 4%，模拟一下最后的收益，竟然是赚了 738&nbsp;元！</p>
<p><code>calculate_value(24, 0.04, 10400, 12000)</code></p>
<div class="highlight"><pre><span></span>real value is 11138.01.(11333.62 - 195.61)
You earn 738.0 YUAN.
</pre></div>
<p>那么是不是办理了就一定稳赚不赔呢？这就要用到 Scipy&nbsp;中的最优化函数找一找结果。</p>
<p>首先要导入需要用的包</p>
<div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">partial</span>
<span class="kn">from</span> <span class="nn">scipy.optimize</span> <span class="kn">import</span> <span class="n">minimize</span>
</pre></div>
<p>用偏导函数固定住不变化的参数，lambda&nbsp;函数用于方便传参</p>
<div class="highlight"><pre><span></span><span class="n">partial_func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="n">calculate_value</span><span class="p">,</span> <span class="n">price</span><span class="o">=</span><span class="mi">10400</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">12000</span><span class="p">,</span> <span class="n">printlog</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="n">func</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">partial_func</span><span class="p">(</span><span class="o">*</span><span class="n">x</span><span class="p">)</span>
</pre></div>
<p>如果是要固定住三个参数，需要传的参数不在第一位，可以用这种方式创建一个偏导函数</p>
<div class="highlight"><pre><span></span><span class="n">partial_func</span> <span class="o">=</span> <span class="n">partial</span><span class="p">(</span><span class="k">lambda</span> <span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">:</span> <span class="n">calculate_value</span><span class="p">(</span><span class="n">b</span><span class="p">,</span><span class="n">a</span><span class="p">,</span><span class="n">c</span><span class="p">,</span><span class="n">d</span><span class="p">),</span><span class="n">b</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span><span class="n">c</span><span class="o">=</span><span class="mi">10400</span><span class="p">,</span><span class="n">d</span><span class="o">=</span><span class="mi">12000</span><span class="p">)</span>
</pre></div>
<p>函数初始在 18 个月，利率 4%，边界定在 12-36&nbsp;个月，3%-6%年化利率。因为最优化函数求的是最小值，我们要求的是最大值，所以还对函数的符号进行改变。</p>
<div class="highlight"><pre><span></span><span class="n">x0</span> <span class="o">=</span> <span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mf">0.04</span><span class="p">)</span>
<span class="n">bnds</span> <span class="o">=</span> <span class="p">((</span><span class="mi">12</span><span class="p">,</span> <span class="mi">36</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.03</span><span class="p">,</span> <span class="mf">0.06</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">minimize</span><span class="p">(</span><span class="k">lambda</span> <span class="n">y</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span> <span class="o">*</span> <span class="n">func</span><span class="p">((</span><span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">])),</span> <span class="n">x0</span><span class="p">,</span> <span class="n">method</span><span class="o">=</span><span class="s1">'SLSQP'</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bnds</span><span class="p">)</span>
</pre></div>
<p>查看结果，寻找最优解失败，猜想一下，这个函数应该不是凸函数，函数边界为（ -<span class="math">\(\infty\)</span>, +<span class="math">\(\infty\)</span>），但在我们给定的范围内，结果停留在了 12 个月，3%年化利率，也就是说越快把充值的钱用完、同时你的资金获得的市场利率越低越有利。
<code>print(res)</code></p>
<div class="highlight"><pre><span></span>     fun: -1297.8802495375876
     jac: array([  31.28442383, 9879.27038574])
 message: 'Positive directional derivative for linesearch'
    nfev: 16
     nit: 8
    njev: 4
  status: 8
 success: False
       x: array([12.  ,  0.03])
</pre></div>
<p>说了这么多，还是很抽象，不如画出来容易理解。
我使用 matplotlib 的 3D&nbsp;图，需要导入相关的包</p>
<div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">mpl_toolkits.mplot3d</span> <span class="kn">import</span> <span class="n">Axes3D</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">matplotlib</span> <span class="kn">import</span> <span class="n">cm</span>
<span class="kn">from</span> <span class="nn">matplotlib.ticker</span> <span class="kn">import</span> <span class="n">FormatStrFormatter</span>
</pre></div>
<p>利用上面的偏导后<code>func</code>函数计算出三个轴的数据</p>
<div class="highlight"><pre><span></span><span class="n">X</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">36</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)),</span> <span class="mi">4</span><span class="p">)</span>
<span class="n">loss_list</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">36</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
    <span class="n">loss_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span>
        <span class="p">[</span><span class="n">func</span><span class="p">((</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span> <span class="o">/</span> <span class="mi">100</span><span class="p">))</span> <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="n">np</span><span class="o">.</span><span class="n">round</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">X</span><span class="p">)),</span> <span class="mi">4</span><span class="p">)])</span>
<span class="n">X</span><span class="p">,</span> <span class="n">Y</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">meshgrid</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">)</span>
<span class="n">Z</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">loss_list</span><span class="p">)</span>
</pre></div>
<p>最后 plot&nbsp;出来并做一些美化</p>
<div class="highlight"><pre><span></span><span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">16</span><span class="p">,</span> <span class="mi">12</span><span class="p">),</span> <span class="n">dpi</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>
<span class="n">ax</span> <span class="o">=</span> <span class="n">fig</span><span class="o">.</span><span class="n">gca</span><span class="p">(</span><span class="n">projection</span><span class="o">=</span><span class="s1">'3d'</span><span class="p">)</span>
<span class="n">surf</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">plot_surface</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">Y</span><span class="p">,</span> <span class="n">Z</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="n">cm</span><span class="o">.</span><span class="n">rainbow</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">antialiased</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">'Month'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">'Yield'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_zlabel</span><span class="p">(</span><span class="s1">'Profit'</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">yaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">FormatStrFormatter</span><span class="p">(</span><span class="s1">'</span><span class="si">%.2f%%</span><span class="s1">'</span><span class="p">))</span>
<span class="n">fig</span><span class="o">.</span><span class="n">colorbar</span><span class="p">(</span><span class="n">surf</span><span class="p">,</span> <span class="n">shrink</span><span class="o">=</span><span class="mf">0.5</span><span class="p">,</span> <span class="n">aspect</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
<p><img alt="profit surface" src="http://kevinstuchuang.qiniudn.com/blog-pic/profit_surface.png"/></p>
<p>三维空间的一个平面，其实就是二维空间的一条直线，收益曲线确实不是一个凸函数。找不到最优解实属正常。但是总的来说，这个充值卡还是很值得办理的，在当前&nbsp;4%的平均利率水平下，他们又不限制使用车辆，所以可以足够快的用完。</p>
<p>最后，虽然这篇文章看起来像个软广，但是我真的不认识发信息的人。</p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';
    mathjaxscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'AMS' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
  </div>


    <div class="comments">
      <div id="disqus_thread"></div>
      <script type="text/javascript">
        var disqus_shortname = 'solarck';
        var disqus_identifier = "gift-card-discount-value.html";
        var disqus_title = "充值卡折现价值分析";
        var disqus_url = "https://www.solarck.com/gift-card-discount-value.html";
        (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
      </script>
      <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus</a>.</noscript>
    </div>

        </div>

          <div class="col-md-3">
  <div class="well">

    <p><abbr title="2018-08-06T15:58:00+08:00"><i class="fa fa-calendar"></i> August 06, 2018</abbr></p>

      <p><address>
        <i class="fa fa-user"></i> 作者:
          <a href="https://www.solarck.com/author/kevin-chen.html" rel="author">Kevin Chen</a>
      </address></p>

    <hr/>

      <p>
              <a href="https://www.solarck.com/category/jin-rong-bi-ji.html" rel="tag"
                  data-toggle="tooltip" class="label label-info"
                  title="3 articles in this category">金融笔记</a>
            <a href="/tag/zhe-xian.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">折现</a>
            <a href="/tag/zui-you-hua.html" data-toggle="tooltip"
      class="label label-default"
      title="1 article with this tag">最优化</a>
      </p>
      <hr/>


      <nav>
        <ul class="pager">
          <li class="previous ">
            <a  href="https://www.solarck.com/upgrade-lede-to-1806.html" title="升级 Openwrt/LEDE 大版本至 18.06"  rel="prev">
              <span aria-hidden="true">←</span> 旧文章
            </a>
          </li>
          <li class="next  disabled ">
            <a  rel="next">
              新文章 <span aria-hidden="true">→</span>
            </a>
          </li>
        </ul>
      </nav>
    

  </div>
            
          </div>

      </div>

    </div>

    <!-- TODO: make footer sticky -->
    <footer class="container-fluid">
      <div class="container">
        <div class="row">

            <div class="col-md-2">
            </div>
            <div class="col-md-2">
                <h5>链接</h5>
                <ul class="list-unstyled">
                  <li>  <a href="http://getpelican.com/">
      <img src="https://besticon-demo.herokuapp.com/icon?url=getpelican.com&size=16" width="16" height="16" class="icon" alt="getpelican.com icon"/>
    Pelican
  </a></li>
                  <li>  <a href="http://python.org/">
      <img src="https://besticon-demo.herokuapp.com/icon?url=python.org&size=16" width="16" height="16" class="icon" alt="python.org icon"/>
    Python.org
  </a></li>
                  <li>  <a href="http://jinja.pocoo.org/">
      <img src="https://besticon-demo.herokuapp.com/icon?url=jinja.pocoo.org&size=16" width="16" height="16" class="icon" alt="jinja.pocoo.org icon"/>
    Jinja2
  </a></li>
                </ul>
            </div>

          <div class="col-md-2">
            <h5>归档</h5>
            <ul class="list-unstyled">
                <li><a href="https://www.solarck.com/categories.html"><i class="fa fa-tags"></i> Categories</a></li>
                <li><a href="https://www.solarck.com/archives.html"><i class="fa fa-calendar"></i> Dates</a></li>
                <li><a href="https://www.solarck.com/tags.html"><i class="fa fa-tag"></i> Tags</a></li>
            </ul>
          </div>

          <div class="col-md-2 text-muted">
            <h5>Copyright</h5>
            <p>© Copyright 2013-2018 Kevin Chen.</p>
          </div>
        <!--
          <div class="col-md-2 text-muted">
            <h5>Disclaimer</h5>
              <p>All opinions expressed in this site are my own personal opinions and are not endorsed by, nor do they represent the opinions of my previous, current and future employers or any of its affiliates, partners or customers.</p>
          </div>
        -->
          <div class="col-md-2">
              <h5>Feeds</h5>
              <ul class="list-unstyled">
                  <li><small><a href="https://www.solarck.com/feeds/all.atom.xml"><i class="fa fa-rss"></i> All posts (Atom)</a></small></li>
              </ul>
          </div>

        </div>
      </div>

      <h5 class="text-right"><a href="#"><i class="fa fa-arrow-up"></i> Back to top</a></h5>

      <div class="container">
        <div class="row col-md-12 text-muted text-center">
          Site generated by <a href="https://getpelican.com"> Pelican</a>.<br/>
          <a href="https://github.com/kdeldycke/plumage"> Plumage</a> theme by <a href="https://kevin.deldycke.com">Kevin Deldycke</a>.
        </div>
      </div>

    </footer>

    <script type="text/javascript">
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-1337838-7', 'auto');
    ga('send', 'pageview');
    </script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fitvids/1.1.0/jquery.fitvids.min.js"></script>
    <script src="https://www.solarck.com/theme/js/jquery.mglass.js"></script>
    <script src="https://www.solarck.com/theme/js/application.js"></script>

  </body>
</html>